INSERT_UPDATE SearchRestriction; code[unique = true] ; name[lang = en] ; query ; principal(UID); restrictedType(code)  ; active; generate
  ; ewallet_credit_card_restriction ; Ewallet Credit Card Restriction ; {vaulttoken} in ({{SELECT {ewallet:vaulttoken} FROM {SiteoneEwalletCreditCard as ewallet JOIN ShipTo2WalletRelation AS b2bunitrelation ON {b2bunitrelation:target} = {ewallet:pk} JOIN B2BUnit  AS b2bunit ON {b2bunit:pk} = {b2bunitrelation:source} } WHERE {b2bunit:path} LIKE CONCAT(SUBSTRING(?session.user.defaultb2bunit.path,1, CASE when CHARINDEX('/',?session.user.defaultb2bunit.path,2)=0 then len(?session.user.defaultb2bunit.path) else CHARINDEX('/',?session.user.defaultb2bunit.path,2)-1 end),'%')}}); b2bgroup      ; SiteoneEwalletCreditCard; true  ; true